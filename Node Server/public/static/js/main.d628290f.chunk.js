(this.webpackJsonpcasestudy2=this.webpackJsonpcasestudy2||[]).push([[0],{114:function(e,t,s){},147:function(e,t){},157:function(e,t,s){"use strict";s.r(t);var n=s(0),a=s(10),i=s.n(a),r=(s(114),s(57),s(98)),o=s(68),c=s(96),l=s.n(c),d=s(88),m=s.n(d),j=s(192),u=s(203),g=s(193),h=s(194),b=s(200),f=s(195),x=s(204),p=s(196),O=s(202),y=s(197),v=s(198),N=s(199),w=s(102),k=s(97),C=Object(k.a)({typography:{useNextVariants:!0},palette:{common:{black:"#000",white:"#fff"},background:{paaper:"#fff",default:"#fafafa"},primary:{light:"rgba(211, 213, 237, 1)",main:"rgba(43, 106, 169, 1)",dark:"rgba(15, 31, 128, 1)",contrastText:"#fff"},secondary:{light:"rgba(238, 219, 189, 1)",main:"rgba(236, 156, 19, 0.78)",dark:"rgba(179, 121, 23, 1)",contrastText:"#000"},error:{light:"#e57373",main:"rgba(217, 26, 12, 1)",dark:"rgba(116, 8, 8, 1)",contrastText:"#fff"},text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"}}}),T=s(94),R=s.n(T),L=s(185),A=s(188),E=s(189),F=s(5),M=function(e){return Object(F.jsx)(L.a,{position:"static",children:Object(F.jsxs)(A.a,{color:"primary",title:"Chappe",children:[Object(F.jsxs)(w.a,{variant:"h6",color:"inherit",children:["Chappe ",!e.isLogin&&Object(F.jsxs)("span",{children:["- ",e.room]})]}),Object(F.jsx)("section",{style:{height:90,width:90,marginLeft:"auto"},children:!e.isLogin&&Object(F.jsx)(E.a,{onClick:function(){return e.viewDialog()},children:Object(F.jsx)(R.a,{style:{color:"white",height:70,width:70}})})})]})})},S=s(191),U=s(190),W=function(e){return Object(F.jsxs)("div",{className:"msgBubble",style:{backgroundColor:e.message.color},children:[Object(F.jsxs)("div",{style:{fontSize:"smaller"},children:[e.message.from," says:",Object(F.jsx)("div",{style:{textAlign:"right",float:"right",paddingLeft:"50px"},children:e.message.time})]}),Object(F.jsx)("div",{style:{fontWeight:"bold",padding:"1%",marginTop:"5%"},children:e.message.text})]})},I=function(e){return Object(F.jsx)("div",{style:{content:"",position:"absolute",bottom:"-15px",left:"".concat(e.alignTriangle),borderWidth:"15px 15px 0",borderStyle:"solid",borderColor:"".concat(e.color," transparent")}})},J=function(e){var t=Object(n.useRef)(null);return Object(n.useEffect)((function(){t.current.scrollIntoView(!0)}),[]),Object(F.jsxs)("div",{className:e.isUser?"listRight":"listLeft",children:[Object(F.jsxs)(U.a,{ref:t,children:[Object(F.jsx)(W,{message:e.message}),Object(F.jsx)(I,{color:e.message.color,alignTriangle:e.isUser?"63%":""})]}),Object(F.jsx)("p",{})]})},P=function(e){var t=e.messages.map((function(t,s){return Object(F.jsx)(J,{message:t,isUser:(n=t.from,e.username===n)},s);var n}));return Object(F.jsx)(S.a,{children:t})},q=s(95),B=s.n(q),D=function(e){var t=e.users.map((function(e,t){return Object(F.jsxs)(U.a,{style:{padding:"1px"},children:[Object(F.jsx)(B.a,{style:{color:e.color,height:18,width:18,paddingRight:"10px"}}),e.chatName," is in room ",e.room]},t)}));return Object(F.jsx)(S.a,{children:t})},H=function(){var e=Object(n.useReducer)((function(e,t){return Object(o.a)(Object(o.a)({},e),t)}),{messages:[],status:"",showjoinfields:!0,alreadyexists:!1,chatName:"",roomName:"",typingMsg:"",isTyping:!1,message:"",dialogOpen:!1,rooms:[],users:[],userRooms:[]}),t=Object(r.a)(e,2),s=t[0],a=t[1];Object(n.useEffect)((function(){i()}),[]);var i=function(){var e=m.a.connect("localhost:5000",{forceNew:!0});e.on("nameexists",d),e.on("welcome",k),e.on("someonejoined",k),e.on("someoneleft",k),e.on("someoneistyping",T),e.on("newmessage",R),e.on("updateUsersRooms",c),a({socket:e})},c=function(e){var t=e.map((function(e){return e.chatName})),s=e.map((function(e){return e.room})).filter((function(e,t,s){return s.indexOf(e)===t}));s.includes("Main")||s.push("Main"),a({users:t,rooms:s,userRooms:e})},d=function(e){a({status:e.text})},k=function(e){var t=s.messages;t.push(e),a({messages:t,showjoinfields:!1,alreadyexists:!1})},T=function(e){e.from!==s.chatName&&a({typingMsg:e.text})},R=function(e){k(e),a({typingMsg:""})};return Object(F.jsxs)(j.a,{theme:C,children:[Object(F.jsxs)("div",{children:[Object(F.jsx)(M,{viewDialog:function(){return a({dialogOpen:!0})},isLogin:s.showjoinfields,room:s.roomName}),Object(F.jsxs)(u.a,{open:s.dialogOpen,onClose:function(){return a({dialogOpen:!1})},style:{margin:20},children:[Object(F.jsx)(g.a,{style:{textAlign:"center"},children:"Users"}),Object(F.jsx)(h.a,{children:Object(F.jsx)(D,{users:s.userRooms})})]})]}),s.showjoinfields&&Object(F.jsxs)("div",{children:[Object(F.jsxs)("div",{style:{border:"solid",borderWidth:1,borderRadius:16,textAlign:"center",padding:"3vw",margin:"3vw"},children:[Object(F.jsx)(l.a,{color:"primary",style:{height:100,width:100}}),Object(F.jsx)("div",{className:"myHeader",children:"Sign In"}),Object(F.jsxs)("div",{style:{textAlign:"left"},children:[Object(F.jsx)(b.a,{style:{width:"100%"},onChange:function(e){a({chatName:e.target.value,status:""})},placeholder:"Enter unique name",autoFocus:!0,required:!0,value:s.chatName,error:""!==s.status,helperText:s.status})," "]})]}),Object(F.jsx)("p",{}),Object(F.jsxs)("div",{style:{border:"solid",borderWidth:.5,borderRadius:16,textAlign:"center",padding:"3vw",margin:"3vw"},children:[Object(F.jsx)("div",{className:"myHeader",children:"Join or Create Room"}),Object(F.jsxs)("div",{style:{textAlign:"left"},children:[Object(F.jsx)(f.a,{component:"fieldset",children:Object(F.jsx)(x.a,{onChange:function(e){return a({roomName:e.target.value})},children:s.rooms.map((function(e,t){return Object(F.jsx)(p.a,{labelPlacement:"start",value:e,control:Object(F.jsx)(O.a,{}),label:e},t)}))})}),Object(F.jsx)(b.a,{style:{width:"100%"},onChange:function(e){a({roomName:e.target.value})},placeholder:"Enter room name",required:!0,value:s.roomName})]})]}),Object(F.jsx)("p",{}),Object(F.jsx)(y.a,{variant:"contained","data-testid":"submit",color:"secondary",style:{marginLeft:"3%",fontWeight:"bold"},onClick:function(){s.socket.emit("join",{chatName:s.chatName,roomName:s.roomName})},disabled:""===s.chatName||""===s.roomName||/^\s+$/.test(s.chatName)||/^\s+$/.test(s.roomName),children:"Join"})]}),!s.showjoinfields&&Object(F.jsx)(v.a,{style:{margin:"2.5%",width:"95%"},children:Object(F.jsxs)(N.a,{style:{textAlign:"center"},children:[s.messages&&Object(F.jsx)("div",{className:"msgList",children:Object(F.jsx)(P,{messages:s.messages,username:s.chatName})}),Object(F.jsx)("div",{children:Object(F.jsx)(w.a,{color:"primary",children:s.typingMsg})})]})}),!s.showjoinfields&&Object(F.jsx)("div",{className:"bottom",children:Object(F.jsx)(b.a,{style:{width:"95%"},onChange:function(e){a({message:e.target.value}),!1===s.isTyping?(s.socket.emit("typing",{from:s.chatName},(function(e){})),a({isTyping:!0})):""===e.target.value&&(a({isTyping:!1}),s.socket.emit("notTyping",{from:s.chatName},(function(e){})))},placeholder:"Send",autoFocus:!0,value:s.message,onKeyPress:function(e){return"Enter"===e.key?void(""!==s.message&&(s.socket.emit("message",{from:s.chatName,text:s.message},(function(e){})),a({isTyping:!1,message:""}))):null}})})]})};var V=function(){return Object(F.jsx)(H,{})},$=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,206)).then((function(t){var s=t.getCLS,n=t.getFID,a=t.getFCP,i=t.getLCP,r=t.getTTFB;s(e),n(e),a(e),i(e),r(e)}))};i.a.render(Object(F.jsx)(V,{}),document.getElementById("root")),$()},57:function(e,t,s){}},[[157,1,2]]]);